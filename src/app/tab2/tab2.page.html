<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>
      Orders
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div style="position: absolute; right:0; padding: 10px;">
    <ion-button (click)='aboutus_modal()'></ion-button>
  </div>

  <!--Only sponsors will see this-->
  <div *ngIf="userRole ==='sponsor'">
    <h5>YOUR CART</h5>

  <!---Cart here--->
  <ion-card>
    <ion-item  *ngFor="let cart of cartArray">

      <!--Quantity-->
      <div>
        <ion-icon name="remove-outline" (click)="decreaseAmt(cart.orderquantity, cart.id)"></ion-icon>
        {{cart.orderquantity}}
        <ion-icon name="add-outline" (click)="increaseAmt(cart.orderquantity, cart.id)"></ion-icon>
      </div>

      <!--Food name-->
      <div>
        {{cart.foodname}}
      </div>

      <!--Price-->
      <div>
        Price:  {{cart.totalfoodprice | currency}}
      </div>

      
     
    </ion-item>

     <!--Total Price-->
    <ion-item>
      <div>
        Total {{totalPriceAll | currency}}
      </div>
    </ion-item>
  </ion-card>

  <!--Payment selection-->
  <ion-select value="PAYNOW" (ionChange)="changePaymentMtd($event.detail.value)">
    <ion-select-option value="PAYNOW">PAYNOW</ion-select-option>
    <ion-select-option value="PAYLAH">PAYLAH</ion-select-option>
  </ion-select>

  <!--Payment here-->
  <ion-button *ngIf="totalPriceAll !== 0" [disabled]="disabled === true" (click)="proceedPayment()">Proceed W Payment</ion-button>
  </div>
  



  <!--When student click on redeem, the receipt will be shown here-->
  <div *ngIf="userRole === 'student'">

    <div *ngIf="receiptData.orderid === ''">Food that is pending collection after redeeming, will be shown here.</div>

    <div *ngIf="receiptData.orderid !==''">
 
      <h2>REDEEMPTION SUCCESSFUL!</h2>
      <ion-card>
        <div>Redemption Number #{{receiptData.orderid}}</div>

        <!--Food Name-->
        <div>
          {{receiptData.foodname}}
        </div>
 
        <div>   
          <!--Canteen-->
          <div>{{receiptData.canteenname}}</div>

          <ion-icon name="ellipse-outline" size></ion-icon>

          <!--Vendor Stall Name-->
          <div>{{receiptData.stallname}}</div>
        </div>

      </ion-card>

      <ion-button color="success" (click)="collected()">COLLECTED</ion-button>
    </div>

    
    
  </div>



  <!--Show latest orders from students that is pending-->
  <div *ngIf="userRole === 'vendor'">
    <div *ngIf="vendorOrderArray.length == 0">Uncompleted orders will be shown here</div>
    <ion-card *ngFor="let order of vendorOrderArray">

        <!--Redemption order ID-->
        <div>
          #{{order.id}}
        </div>       
      
        <!--Food name-->
        <div>
          {{order.foodname}}
        </div>

        <!--Date-->
        <div>
          {{order.date?.toDate() | date: 'mediumTime'}}
        </div>

        <!---Customer--->
        <div>
          {{order.userID}}
        </div>
     
    </ion-card>

  </div>


 
 
</ion-content>
